# A example definition for book service.
# The book service uses user service and ab-testing service.
version: 1
dependencies:
  - name: 'user'
    cluster_name: 'user-development'
    lb: 'user-app:8080'
    host_header: 'user-service'
    tls: false
    connect_timeout_ms: 250
    circuit_breaker:
      max_connections: 64
      max_pending_requests: 128
      max_retries: 3
    routes:
      - prefix: '/'
        timeout_ms: 3000
        retry_policy:
          retry_on: '5xx,connect-failure,refused-stream'
          num_retries: 3
          per_try_timeout_ms: 1000
  - name: 'ab-testing'
    cluster_name: 'ab-testing-development'
    sds: true
    tls: false
    connect_timeout_ms: 250
    circuit_breaker:
      max_connections: 64
      max_pending_requests: 128
      max_retries: 3
    routes:
      - prefix: '/'
        timeout_ms: 3000
        retry_policy:
          retry_on: '5xx,connect-failure,refused-stream'
          num_retries: 3
          per_try_timeout_ms: 1000
